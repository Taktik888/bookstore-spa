(this["webpackJsonpbookstore-spa"]=this["webpackJsonpbookstore-spa"]||[]).push([[0],{184:function(e,t,r){},298:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"removeFromCart",(function(){return g})),r.d(n,"addToCart",(function(){return _}));var c={};r.r(c),r.d(c,"setFilter",(function(){return D})),r.d(c,"setSearchQuery",(function(){return L}));var a=r(0),i=r(32),o=r.n(i),s=r(26),u=(r(184),r(185),r(67)),l=r.n(u),d=r(10),j=r(153),b=r(154),O=r(164),h=r(161),f=r(155),p=r.n(f),m=r(317),y=r(321),x=r(20),v=r(156),C=r.n(v),g=function(e){return{type:"REMOVE_FROM_CART",payload:e}},_=function(e){return{type:"ADD_TO_CART",payload:e}},k=r(319),R=r(318),E=r(320),T=r(299),w=r(163),S=r(4),I=function(e){var t=e.title,r=e.image,n=e.removeFromCart,c=e.id;return Object(S.jsx)(E.a,{divided:!0,verticalAlign:"middle",children:Object(S.jsxs)(E.a.Item,{children:[Object(S.jsx)(E.a.Content,{floated:"right",children:Object(S.jsx)(T.a,{onClick:n.bind(undefined,c),color:"red",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}),Object(S.jsx)(w.a,{avatar:!0,src:r}),Object(S.jsx)(E.a.Content,{children:t})]})})},B=function(e){var t=e.totalPrice,r=e.count,n=e.items;return Object(S.jsx)("div",{className:"menu",children:Object(S.jsxs)(k.a,{children:[Object(S.jsx)(k.a.Item,{children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u043d\u0438\u0433"}),Object(S.jsxs)(k.a.Menu,{position:"right",children:[Object(S.jsxs)(k.a.Item,{children:["\u0418\u0442\u043e\u0433\u043e: \xa0 ",Object(S.jsx)("b",{children:t})," \xa0 \u0440\u0443\u0431."]}),Object(S.jsx)(R.a,{trigger:Object(S.jsxs)(k.a.Item,{name:"help",children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430 (",Object(S.jsx)("b",{children:r}),")"]}),content:n.map((function(e,t){return Object(a.createElement)(I,Object(d.a)(Object(d.a)({},e),{},{key:t}))})),on:"click",hideOnScroll:!0,flowing:!0})]})]})})},A=Object(s.b)((function(e,t){var r=e.cart;t.id;return{totalPrice:r.items.reduce((function(e,t){return e+t.price}),0),count:r.items.length,items:C()(r.items,(function(e){return e.id}))}}),(function(e){return Object(d.a)({},Object(x.b)(n,e))}))(B),F=r(35),Q=function(e){var t=e.title,r=e.author,n=e.price,c=e.image,a=e.addToCart,i=e.addedCount;return Object(S.jsxs)(y.a,{children:[Object(S.jsx)(w.a,{src:c}),Object(S.jsxs)(y.a.Content,{children:[Object(S.jsx)(y.a.Header,{children:t}),Object(S.jsx)(y.a.Meta,{children:Object(S.jsx)("span",{className:"date",children:r})})]}),Object(S.jsxs)(y.a.Content,{extra:!0,children:[Object(S.jsx)(F.a,{name:"rub"}),n]}),Object(S.jsxs)(T.a,{onClick:a.bind(undefined,e),children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443",i>0&&"(".concat(i,")")]})]})},M=Object(s.b)((function(e,t){var r=e.cart,n=t.id;return{addedCount:r.items.reduce((function(e,t){return e+(t.id===n?1:0)}),0)}}),(function(e){return Object(d.a)({},Object(x.b)(n,e))}))(Q),D=function(e){return{type:"SET_FILTER",payload:e}},L=function(e){return{type:"SET_SEARCH_QUERY",payload:e}},H=r(316),P=void 0,Y=function(e){var t=e.setFilter,r=e.filterBy,n=e.searchQuery,c=e.setSearchQuery;return Object(S.jsxs)(k.a,{secondary:!0,children:[Object(S.jsx)(k.a.Item,{name:"all",active:"all"===r,onClick:t.bind(P,"all"),children:"\u0412\u0441\u0435"}),Object(S.jsx)(k.a.Item,{name:"popular",active:"popular"===r,onClick:t.bind(P,"popular"),children:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435"}),Object(S.jsx)(k.a.Item,{name:"price_high",active:"price_high"===r,onClick:t.bind(P,"price_high"),children:"\u0426\u0435\u043d\u0430 (\u0434\u043e\u0440\u043e\u0433\u0438\u0435)"}),Object(S.jsx)(k.a.Item,{name:"price_low",active:"price_low"===r,onClick:t.bind(P,"price_low"),children:"\u0426\u0435\u043d\u0430 (\u0434\u0435\u0448\u0451\u0432\u044b\u0435)"}),Object(S.jsx)(k.a.Item,{name:"author",active:"author"===r,onClick:t.bind(P,"author"),children:"\u0410\u0432\u0442\u043e\u0440"}),Object(S.jsx)(R.a,{trigger:Object(S.jsx)(k.a.Item,{children:Object(S.jsx)(H.a,{icon:"search",onChange:function(e){return c(e.target.value)},value:n,placeholder:"\u041f\u043e\u0438\u0441\u043a..."})}),header:"\u041f\u043e\u0438\u0441\u043a \u043a\u043d\u0438\u0433",content:"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043a\u0430\u0442\u044c \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u043a\u043d\u0438\u0433\u0438 \u0438\u043b\u0438 \u0430\u0432\u0442\u043e\u0440\u0443.",on:"hover",hoverable:!0})]})},J=Object(s.b)((function(e){return{filterBy:e.filter.filterBy}}),(function(e){return Object(d.a)({},Object(x.b)(c,e))}))(Y),K=function(e){Object(O.a)(r,e);var t=Object(h.a)(r);function r(){return Object(j.a)(this,r),t.apply(this,arguments)}return Object(b.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.setBooks;p.a.get("/books.json").then((function(t){var r=t.data;e(r)}))}},{key:"render",value:function(){var e=this.props,t=e.books,r=e.isReady;return Object(S.jsxs)(m.a,{children:[Object(S.jsx)(A,{}),Object(S.jsx)(J,{}),Object(S.jsx)(y.a.Group,{itemsPerRow:4,children:r?t.map((function(e,t){return Object(a.createElement)(M,Object(d.a)(Object(d.a)({},e),{},{key:t}))})):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]})}}]),r}(a.Component),N=function(e,t,r){return function(e,t){switch(t){case"all":return e;case"price_high":return l()(e,"price","desc");case"price_low":return l()(e,"price","asc");case"popular":return l()(e,"rating","desc");case"author":return l()(e,"author","asc");default:return e}}(function(e,t){return e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0}))}(e,r),t)},U=Object(s.b)((function(e){var t=e.books,r=e.filter;return{books:t.items&&N(t.items,r.filterBy,r.searchQuery),isReady:t.isReady}}),{setBooks:function(e){return{type:"SET_BOOKS",payload:e}}})(K),V=r(160),G=r.n(V),q={isReady:!1,items:null},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return Object(d.a)(Object(d.a)({},e),{},{items:t.payload,isReady:!0});case"SET_IS_READY":return Object(d.a)(Object(d.a)({},e),{},{isReady:t.payload});default:return e}},W=r(162),X={items:[]},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return Object(d.a)(Object(d.a)({},e),{},{items:[].concat(Object(W.a)(e.items),[t.payload])});case"REMOVE_FROM_CART":return Object(d.a)(Object(d.a)({},e),{},{items:e.items.filter((function(e){return e.id!==t.payload}))});default:return e}},$={searchQuery:"",filterBy:"all"},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_QUERY":return Object(d.a)(Object(d.a)({},e),{},{searchQuery:t.payload});case"SET_FILTER":return Object(d.a)(Object(d.a)({},e),{},{filterBy:t.payload});default:return e}},te=Object(x.c)({books:z,cart:Z,filter:ee}),re=function(){return Object(x.d)(te,Object(x.a)(G.a))}();o.a.render(Object(S.jsx)(s.a,{store:re,children:Object(S.jsx)(U,{})}),document.getElementById("root"))}},[[298,1,2]]]);
//# sourceMappingURL=main.c50ceb48.chunk.js.map